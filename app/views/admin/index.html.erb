<h2>Stats</h2>

<p>Number of Guests: <%= @rsvps.select {|rsvp| rsvp.complete? }.flat_map(&:guests).count %> <p>
<p>Number of Guests Requiring Transportation: <%= @rsvps.select {|rsvp| rsvp.complete? && rsvp.bus_required }.flat_map(&:guests).count %> <p>
<p>Number of Song Request: <%= @rsvps.select {|rsvp| rsvp.complete? }.flat_map(&:song_requests).count %> <p>


<h2>Guests</h2>

<table>
  <thead>
    <tr>
      <th>RSVP</th>
      <th>First Name</th>
      <th>Last Name</th>
      <th>Bus? </th>
      <th>Completed?</th>
    </tr>
  </thead>
  <tbody>
    <% @guests.each do |guest| %>
      <tr>
        <td><%= link_to "show", admin_rsvp_path(guest.rsvp_id) %></td>
        <td><%= guest.first_name %></td>
        <td><%= guest.last_name %></td>
        <td><%= guest.rsvp.bus_required ? 'Yes' : 'No' %></td>
        <td><%= guest.rsvp.complete? ? '✅' : '❌' %></td>

      </tr>
    <% end %>
  </tbody>
</table>

<h2>Song Requests</h2>

<table>
  <thead>
    <tr>
      <th>Title</th>
      <th>Artist</th>
    </tr>
  </thead>
  <tbody>
    <% @song_requests.each do |song_request| %>
      <tr>
        <td><%= song_request.title %></td>
        <td><%= song_request.artist %></td>
      </tr>
    <% end %>
  </tbody>
</table>